# APPLICATIONS TO START AT BOOT
exec --no-startup-id /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1 &
exec --no-startup-id autotiling
# exec --no-startup-id xfce4-power-manager &
# exec --no-startup-id blueman-applet &
# exec --no-startup-id dropbox start
# exec --no-startup-id megasync
### Kill WiFi and BlueTooth
exec --no-startup-id rfkill block all

### Variables
set $mod Mod4

set $up k
set $down j
set $left h
set $right l 

set $term alacritty
set $menu xfce4-appfinder

input type:keyboard xkb_numlock enabled

##################### Testing
bindsym $mod+Shift+u exec alacritty -e "$HOME/.config/sway/scripts/quickedit.sh"
bindsym $mod+n exec --no-startup-id ~/.config/sway/scripts/wallpaper.sh

exec --no-startup-id firefox;focus;border none

# Clipboard {{{
    bindsym $mod+c exec clipman pick -t wofi
    bindsym $mod+Ctrl+c exec clipman clear -t wofi
    exec wl-paste -t text --watch clipman store --max-items=100
    # For primary clipboard support, also add :
    exec wl-paste -p -t text --watch clipman store -P --histpath="~/.local/share/clipman-primary.json"
    exec clipman restore
# }}}

include $HOME/.config/sway/conf.d/*

output * bg ~/Pictures/Wallpapers/startscreen.png fill

################# My keybindings

bindsym $mod+Shift+Return exec --no-startup-id thunar;focus
bindsym $mod+Shift+KP_Enter exec --no-startup-id thunar;focus

bindsym $mod+mod1+a exec --no-startup-id pavucontrol-qt;focus
bindsym $mod+mod1+b exec --no-startup-id firefox;focus;
bindsym $mod+mod1+Shift+b workspace $ws5; exec --no-startup-id brave --password-store=basic
bindsym $mod+mod1+c exec --no-startup-id code
bindsym $mod+mod1+e exec alacritty -e nvim;focus
bindsym $mod+mod1+f exec --no-startup-id catfish;focus;border none
bindsym $mod+mod1+g exec --no-startup-id gimp;focus
# https://unix.stackexchange.com/questions/256518/disable-the-wireless-network-adapter-in-arch
bindsym $mod+mod1+k exec --no-startup-id rfkill block 1
bindsym $mod+mod1+m exec --no-startup-id nwg-look
bindsym $mod+mod1+p exec --no-startup-id pragha;focus
bindsym $mod+mod1+q exec --no-startup-id qbittorrent;exec "notify-send 'QBitTorrent' 'Started'";focus
bindsym $mod+mod1+r exec alacritty -e ranger;focus
bindsym $mod+mod1+s exec --no-startup-id subl;focus
bindsym $mod+mod1+t exec --no-startup-id telegram-desktop;focus
bindsym $mod+mod1+v exec gnome-boxes;focus;exec "notify-send 'Gnome-Boxes' 'Started'"
bindsym $mod+mod1+w exec --no-startup-id azote
bindsym $mod+mod1+y exec --no-startup-id freeciv-gtk3;exec --no-startup-id pactl set-sink-volume 0 20%;bar mode hide
bindsym $mod+mod1+z exec --no-startup-id xfce4-taskmanager;focus

bindsym $mod+mod1+u exec --no-startup-id  swaymsg -t get_tree | jq -r '.. | select(.focused?) | .rect | "\(.x),\(.y) \(.width)x\(.height)"' | grim -g - screenshot.png

bindsym $mod+o floating toggle; [floating] resize set 1500 1180; move position 220 24
bindsym $mod+p floating toggle; [floating] resize set 1500 400; move position 220 24

################ Start at Workspace 2
workspace $ws2;

################# Output configuration
# You can get the names of your outputs by running: swaymsg -t get_outputs
# For laptop+xtra monitor: eDP-1 1920x1080 and HDMI-2  1920x1200
# output HDMI-A-1 res 1920x1200

# focus output HDMI-2 
# outputname = display id = HDMI-A-1
# swaymsg "output HDMI-A-1 power toggle"

### Key bindings

    # Start a terminal
    bindsym $mod+Return exec $term
    bindsym $mod+KP_Enter exec --no-startup-id $term;focus

    # Kill focused window
    bindsym $mod+q kill
    bindsym $mod+Shift+q kill

    # Start your launcher
    bindsym $mod+d exec $menu

    # Reload the configuration file
    bindsym $mod+Shift+c reload
    # bindsym --to-code $mod+Alt+c reload

    # Exit sway (logs you out of your Wayland session)
 #    bindsym $mod+Shift+e exec swaynag -t warning -m 'You pressed the exit shortcut. Do you really want to exit sway? This will end your Wayland session.' -B 'Yes, exit sway' 'swaymsg exit'
bindsym $mod+Shift+e exec swaymsg exit
    bindsym Pause exit

################# audioctl
bindsym mod1+F10 exec --no-startup-id pactl set-sink-volume 0 -5%
bindsym mod1+F11 exec --no-startup-id pactl set-sink-volume 0 +5%
bindsym mod1+F12 exec --no-startup-id pactl set-sink-mute 0 toggle
bindsym $mod+mod1+F10 exec --no-startup-id pactl set-sink-volume 0 25%
bindsym $mod+mod1+F11 exec --no-startup-id pactl set-sink-volume 0 85%
################ playctl
bindsym mod1+Shift+F10 exec --no-startup-id playerctl next
bindsym mod1+Shift+F11 exec --no-startup-id playerctl play-pause
bindsym mod1+Shift+F12 exec --no-startup-id playerctl stop
################# backlight for laptop                      
# bindsym $mod+F11 exec --no-startup-id brightnessctl -dec 20 # decrease screen brightness
# bindsym $mod+F12 exec --no-startup-id brightnessctl -inc 20 # increase screen brightness


############### Scratchpad:Cm
# Move the currently focused window to the scratchpad
bindsym $mod+Shift+minus move scratchpad

# Show the next scratchpad window or hide the focused scratchpad window.
# If there are multiple scratchpad windows, this command cycles through them.
bindsym $mod+minus scratchpad show

# Status Bar - Thanks to: https://github.com/pinselimo/dotfiles/blob/main/.config/sway/config a seperate config for two bars. 
bindsym $mod+b exec swaymsg bar mode toggle
bindsym $mod+Ctrl+b exec swaymsg bar mode toggle bar-0
bindsym $mod+Shift+b exec swaymsg bar mode toggle bar-1

default_border none
default_floating_border none
font pango:monospace 8
# titlebar_padding 1
# titlebar_border_thickness 0

bar {
    id bar-0
    swaybar_command waybar
    position top
    mode dock
    modifier Mod4
}

bar {
    id bar-1
    swaybar_command ""
    position bottom
    mode dock
    modifier none
}

# exec systemctl --user import-environment DISPLAY WAYLAND_DISPLAY SWAYSOCK
# exec hash dbus-update-activation-environment 2>/dev/null && dbus-update-activation-environment --systemd DISPLAY WAYLAND_DISPLAY SWAYSOCK XDG_CURRENT_DESKTOP

include /etc/sway/config.d/*
